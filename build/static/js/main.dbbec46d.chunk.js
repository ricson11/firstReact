(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{103:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(22),r=a.n(c),o=(a(66),a(39),a(67),a(68),a(4)),i=a(5),l=a(7),u=a(6),h=a(9),d=a(10),m=a(8),j=a.n(m),b=a(0),p=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"container-fluid footer bg-dark mt-5 ",children:Object(b.jsx)("p",{className:"text-center text-white",children:" Destech React Project \xa9 2021"})})}}]),a}(s.Component),g=a(3),O=Object(s.createContext)({}),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={posts:{},currentUser:{},logger:"",allPosts:{}},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;sessionStorage.getItem("logMessage")&&g.b.success("welcome"),j.a.get("http://localhost:4000/posts").then((function(t){e.setState({posts:t.data})})).catch((function(e){console.log(e.response)}));var t=this.context;this.setState({currentUser:t.currentUser,logger:t.logger,allPosts:t.allPosts})}},{key:"render",value:function(){var e=Array.from(this.state.posts),t=this.state,a=t.currentUser,s=t.logger,n=t.allPosts;return console.log(n),Object(b.jsxs)("div",{className:"Conatiner-fluid mt-5",children:[Object(b.jsxs)("h3",{className:"text-center",children:[" My First React Project ",a?a.username:""," ",s]}),Object(b.jsxs)("section",{className:"banner text-center mt-4 text-white bg-success",children:[Object(b.jsx)("h4",{className:"p-4",children:"About Project"}),this.props.allPosts,Object(b.jsx)("p",{className:"text-center",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Incidunt culpa possimus assumenda aut reiciendis maiores dolores quae explicabo non doloremque quaerat sed, dignissimos praesentium delectus magni accusamus rem dolore soluta."}),Object(b.jsx)("p",{className:"text-center",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores eaque sunt quaerat, ad harum odio accusamus rerum nam obcaecati autem a, qui iure nesciunt molestias accusantium ut, amet reprehenderit maiores."})]}),Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-8",children:[Object(b.jsx)("h4",{className:" text-center my-4",children:"Main Page"}),Object(b.jsx)("div",{className:"card-group",children:e.map((function(e,t){return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{className:"img-card-top",src:e.image[0],alt:""}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(h.b,{to:"/post/".concat(e._id),children:Object(b.jsx)("h5",{className:"card-title",children:e.title})})})]},t)}))})]}),Object(b.jsxs)("div",{className:"col-md-4 bg-success",children:[Object(b.jsx)("h4",{className:"text-center my-4",children:"Side Page"}),e.map((function(e,t){return Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-6",children:Object(b.jsx)("img",{className:"mediaImages ",src:e.image[0],alt:""})}),Object(b.jsx)("div",{className:"col-6",children:Object(b.jsx)("p",{children:e.title})})]},t)}))]})]})}),Object(b.jsx)(p,{})]})}}]),a}(s.Component);x.contextType=O;var f=x,v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"logOut",value:function(){window.location.reload(!0),localStorage.removeItem("currentUser"),localStorage.removeItem("logger"),sessionStorage.removeItem("logMessage"),g.b.success("logged out")}},{key:"render",value:function(){var e=localStorage.getItem("logger");return Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",id:"navbarNav",children:Object(b.jsxs)("div",{className:"container-fluid ",children:[Object(b.jsx)(h.b,{className:"navbar-brand",to:"/",children:"MYPDF"}),Object(b.jsx)("button",{className:"navbar-toggler ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(b.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0 stopIt",id:"stopIt",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.b,{className:"nav-link active",to:"/",children:"Home"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.b,{className:"nav-link",to:"/about",children:"ABout Us"})}),e?Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.b,{to:"#",onClick:this.logOut,className:"nav-link",children:"logOut"})}):Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.b,{className:"nav-link active",to:"/user/login",children:"Login"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.b,{className:"nav-link",to:"/new",children:"Create Post"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.b,{className:"nav-link",to:"/contact",children:"Contact"})})]})})]})})}}]),a}(s.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isMessage:!0},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({isMessage:!1})}),3e3),this.setState({currentUser:localStorage.getItem("currentUser")})}},{key:"render",value:function(){var e=localStorage.getItem("currentUser"),t=JSON.parse(e),a=localStorage.getItem("logger");return Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)(h.b,{className:"",to:"/edit/post/".concat(t?t._id:""),children:" User"}),Object(b.jsxs)("h5",{children:[t?t.email:"",a]}),Object(b.jsx)("h5",{className:"text-success",children:t?"you are currently loggedin":"you are loggedout"}),Object(b.jsx)("h5",{className:"text-success text-center my-4",children:this.state.isMessage?"Welcome to about page":""}),Object(b.jsx)("h5",{className:"text-center",children:"About Us"}),Object(b.jsxs)("section",{className:"banner text-center mt-4 text-white bg-success",children:[Object(b.jsx)("h4",{className:"p-4",children:"About Project"}),Object(b.jsx)("p",{className:"text-center",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Incidunt culpa possimus assumenda aut reiciendis maiores dolores quae explicabo non doloremque quaerat sed, dignissimos praesentium delectus magni accusamus rem dolore soluta."}),Object(b.jsx)("p",{className:"text-center",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores eaque sunt quaerat, ad harum odio accusamus rerum nam obcaecati autem a, qui iure nesciunt molestias accusantium ut, amet reprehenderit maiores."})]})]})}}]),a}(s.Component),y=a(2),S=a(61),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={detail:"<p>React is realy</p>"},s.handleChange=s.handleChange.bind(Object(y.a)(s)),s.onEditorChange=s.onEditorChange.bind(Object(y.a)(s)),s}return Object(i.a)(a,[{key:"onEditorChange",value:function(e){this.setState({detail:e.editor.getData()})}},{key:"handleChange",value:function(e){this.setState({data:e.target.value})}},{key:"componentDidMount",value:function(){localStorage.getItem("logger")||g.b.error("login to access this page")}},{key:"render",value:function(){return localStorage.getItem("logger")?Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)("h5",{className:"text-center",children:"Contact Us"}),Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter your name"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter your email"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{className:"btn btn-success",children:"Message"})})]}),Object(b.jsx)(S.a,{detail:"<p>kkkkkk</p>"})]}):Object(b.jsx)(f,{})}}]),a}(s.Component),k=a(17),C=a.n(k),P=a(60),M=a(21),D=a(20),I=a.n(D),E=a(23),R=a(24),T=a.n(R),A=a(25),U=a.n(A),L=a(59),F=a.n(L);I.a.extend(F.a);var _=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleChange=function(t,a){var s=a.getData();e.setState({detail:s}),console.log(s)},e.handleClick=function(t){var a=t.selected;e.setState({pageNumber:a}),window.scrollTo(0,0)},e.maxSelectFile=function(e){if(e.target.files.length>3){return g.b.error("Only 3 images can be uploaded at a time"),e.target.value=null,console.log("Only 3 images can be uploaded at a time"),!1}return!0},e.checkMimeType=function(e){for(var t=e.target.files,a="",s=["image/png","image/jpg","image/jpeg"],n=0;n<t.length;n++)s.every((function(e){return t[n].type!==e}))&&(a+=t[n].type+" is not a supported format\n",g.b.error(t[n].type+" is not a supported format\n"));return""===a||(e.target.value=null,console.log(a),!1)},e.checkFileSize=function(e){for(var t=e.target.files,a="",s=0;s<t.length;s++)t[s].size>1e6&&(a+=t[s].type+"is too large, please pick a smaller file\n",g.b.error(t[s].type+"is too large, please pick a smaller file\n"));return""===a||(e.target.value=null,console.log(a),!1)},e.onSubmit=function(){var t=Object(M.a)(C.a.mark((function t(a){var s,n,c,r,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a.preventDefault(),s=new FormData,n=e.state.image,c=0;c<n.length;c++)s.append("image",n[c]),console.log(n[c]);return s.append("title",e.state.title),s.append("detail",e.state.detail),console.log(e.state.image),t.prev=7,t.next=10,j.a.post("http://localhost:4000/post",s);case 10:r=t.sent,console.log(r),(o=Object(P.a)(e.state.posts)).unshift(r.data),e.setState({title:"",detail:"",image:"",isMessage:!0,posts:o}),setTimeout((function(){e.setState({isMessage:!1})}),3e3),t.next=27;break;case 18:if(t.prev=18,t.t0=t.catch(7),console.log(t.t0.response),404!==(r=t.t0.response).status){t.next=26;break}return t.abrupt("return",e.props.history.push("/error/404"));case 26:return t.abrupt("return",e.props.history.push("/error/500"));case 27:case"end":return t.stop()}}),t,null,[[7,18]])})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=Object(M.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("http://localhost:4000/posts").then((function(t){e.setState({posts:t.data})}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e.state={title:"",detail:"",image:"",isMessage:!1,isDeleted:!1,posts:{},search:"",mySearch:{},searchFound:"",searchNotFound:"",showPage:!0,pageNumber:0},e.changeTitle=e.changeTitle.bind(Object(y.a)(e)),e.changeSearch=e.changeSearch.bind(Object(y.a)(e)),e.onSearch=e.onSearch.bind(Object(y.a)(e)),e.changeImage=e.changeImage.bind(Object(y.a)(e)),e.onSubmit=e.onSubmit.bind(Object(y.a)(e)),e.deletePost=e.deletePost.bind(Object(y.a)(e)),e.handleChange=e.handleChange.bind(Object(y.a)(e)),e.handleClick=e.handleClick.bind(Object(y.a)(e)),e}return Object(i.a)(a,[{key:"changeSearch",value:function(e){this.setState({search:e.target.value})}},{key:"onSearch",value:function(e){e.preventDefault();var t=this.state,a=t.posts,s=t.search,n=a.filter((function(e){return e.title.includes(s)})),c=a.filter((function(e){return e.detail.includes(s)}));if(console.log(n),console.log(c),console.log(s),!(n.length>0)){return console.log("Content not found"),g.b.error("No search result for ".concat(s," found")),this.setState({search:"",searchNotFound:"No search result for ".concat(s," found")}),!1}console.log("Content  found"),g.b.success(" search result for ".concat(s," found"));var r=a.filter((function(e){return e.title.includes(s)}));console.log(r),this.setState({mySearch:r,searchFound:"Search result for ".concat(s," found"),showPage:!1})}},{key:"changeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"changeImage",value:function(e){this.maxSelectFile(e)&&this.checkMimeType(e)&&this.checkFileSize(e)&&this.setState({image:e.target.files})}},{key:"deletePost",value:function(e){var t=this;j.a.delete("http://localhost:4000/delete/post/"+e).then((function(e){return console.log(e.data)})),this.setState({posts:this.state.posts.filter((function(t){return t._id!==e})),isDeleted:!0}),setTimeout((function(){t.setState({isDeleted:!1})}),3e3)}},{key:"render",value:function(){var e=this,t=this.state.pageNumber,a=Array.from(this.state.posts),s=2*t,n=a.slice(s,s+2).map((function(t){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)(h.b,{className:"",to:"/post/".concat(t._id),children:[" ",Object(b.jsxs)("h4",{children:[t.title.substring(0,10)," ..."]})]}),Object(b.jsx)(h.b,{className:"",to:"/edit/post/".concat(t._id),children:" Edit"}),Object(b.jsx)(h.b,{className:"",to:"/delete/post/".concat(t._id),children:" Delete"}),Object(b.jsx)(h.b,{to:"#",onClick:function(){e.deletePost(t._id)},children:"Delete"}),Object(b.jsx)("h4",{className:"ck-content",dangerouslySetInnerHTML:{__html:t.detail}}),Object(b.jsx)("img",{src:t.image[0],className:"postImage",alt:""}),Object(b.jsx)("h4",{children:I()(t.createdAt).fromNow()}),Object(b.jsx)("h4",{children:I()(t.createdAt).format("DD/MM/YYYY, h:mm a")})]},t._id)})),c=Math.ceil(a.length/2),r=Array.from(this.state.mySearch);return this.state.showPage?Object(b.jsxs)("div",{className:"container-fluid my-5",children:[Object(b.jsxs)("div",{className:"",children:[n,Object(b.jsx)(U.a,{previousLabel:"prev",nextLabel:"Next",pageCount:c,onPageChange:this.handleClick,marginPagesDisplayed:2,pageRangeDisplayed:0,containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"})]}),Object(b.jsx)("h5",{className:"text-success text-center",children:this.state.isMessage?"Posted":" "}),Object(b.jsx)("h5",{className:"text-success text-center",children:this.state.isDeleted?"Post deleted":" "}),Object(b.jsx)("h5",{className:"",children:"Search"}),Object(b.jsxs)("form",{onSubmit:this.onSearch,children:[Object(b.jsx)("input",{type:"search",className:"form-control",value:this.state.search,onChange:this.changeSearch}),Object(b.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Search"})]}),Object(b.jsx)("h5",{className:"text-center",children:"Create New Post"}),Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter your title",value:this.state.title,onChange:this.changeTitle})]}),Object(b.jsx)(E.CKEditor,{editor:T.a,data:this.state.detail,onChange:this.handleChange,config:{}}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"upload"}),Object(b.jsx)("input",{type:"file",defaultValue:this.state.image,multiple:!0,onChange:this.changeImage,className:"form-control"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{className:"btn btn-success",type:"submit",children:"Post"})})]}),Object(b.jsx)("div",{className:"container my-5",children:Object(b.jsx)("h5",{className:"text-center",children:this.state.title})})]}):Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("div",{className:"container my-3",children:[r?Object(b.jsx)("h5",{className:"text-danger text-center",children:this.state.searchFound}):"",r.map((function(e,t){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(h.b,{to:"post/".concat(e._id),children:Object(b.jsx)("h5",{className:"text-center",children:e.title})})},t)}))]})})}}]),a}(s.Component),q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t={comment:s.state.comment};(function(){var e=Object(M.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("http://localhost:4000/comment/post/".concat(s.props.match.params.id),t);case 3:a=e.sent,console.log(a),g.b.success("Comment posted"),s.setState({comment:"",postComment:a.data.comments}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()},s.state={isMessage:!0,images:{},comment:"",post:{},postComment:{},detail:"",title:""},s.changeComment=s.changeComment.bind(Object(y.a)(s)),s.onSubmit=s.onSubmit.bind(Object(y.a)(s)),s}return Object(i.a)(a,[{key:"changeComment",value:function(e){this.setState({comment:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({isMessage:!1})}),3e3),j.a.get("http://localhost:4000/thePost/".concat(this.props.match.params.id)).then((function(t){e.setState({post:t.data,images:t.data.image,detail:t.data.detail,title:t.data.title})})).catch((function(e){console.log(e)})),j.a.get("http://localhost:4000/comment/post/".concat(this.props.match.params.id)).then((function(t){e.setState({postComment:t.data.comments})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=Array.from(this.state.postComment),t=Array.from(this.state.images);return Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)("h5",{className:"text-success text-center my-4",children:this.state.isMessage?"Welcome to show page":""}),Object(b.jsx)("h5",{children:this.state.title}),Object(b.jsx)("p",{className:"ck-content",dangerouslySetInnerHTML:{__html:this.state.detail}}),t.slice(0,1).map((function(e,t){return Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:e,className:"postImage",alt:""})},t)})),Object(b.jsx)("h5",{children:"Others Images"}),t.slice(1,3).map((function(e,t){return Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:e,className:"postImage",alt:""})},t)})),e.map((function(e,t){return Object(b.jsxs)("div",{children:[e.comment," on ",I()(e.commentDate).format("DD/MM/YY")]},t)})),Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Comment here"}),Object(b.jsx)("textarea",{value:this.state.comment,onChange:this.changeComment,placeholder:"Comment here...",rows:"5",className:"form-control"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{className:"btn btn-success",type:"submit",children:"Post Comment"})})]})})]})}}]),a}(s.Component),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handleChange=function(e,t){var a=t.getData();s.setState({detail:a}),console.log(a)},s.componentDidMount=function(){setTimeout((function(){s.setState({isMessage:!1})}),3e3),j.a.get("http://localhost:4000/edit/thePost/".concat(s.props.match.params.id)).then((function(e){s.setState({title:e.data.title,detail:e.data.detail,image:e.data.image})})).catch((function(e){console.log(e)}))},s.state={isMessage:!0,title:"",detail:"",image:""},s.changeTitle=s.changeTitle.bind(Object(y.a)(s)),s.onSubmit=s.onSubmit.bind(Object(y.a)(s)),s.changeImage=s.changeImage.bind(Object(y.a)(s)),s.handleChange=s.handleChange.bind(Object(y.a)(s)),s}return Object(i.a)(a,[{key:"changeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"changeImage",value:function(e){this.setState({image:e.target.files[0]})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("image",this.state.image),t.append("title",this.state.title),t.append("detail",this.state.detail),j.a.put("http://localhost:4000/update/post/".concat(this.props.match.params.id),t).then((function(e){return console.log(e.data)})),this.setState({title:this.state.title,detail:this.state.detail,image:this.state.image}),this.props.history.push("/new")}},{key:"render",value:function(){var e=Array.from(this.state.image);return Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)("h5",{className:"text-success text-center my-4",children:this.state.isMessage?"Welcome to about page":""}),Object(b.jsx)("h5",{className:"text-center",children:"About Us"}),Object(b.jsx)("h5",{className:"text-center",children:"Create New Post"}),Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter your title",value:this.state.title,onChange:this.changeTitle})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)(E.CKEditor,{editor:T.a,data:this.state.detail,onChange:this.handleChange,config:{}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Uploaded Images"}),e.map((function(e,t){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("img",{src:e,className:"postImage",alt:""})},t)}))]}),Object(b.jsxs)("div",{className:"form-group mt-2",children:[Object(b.jsx)("label",{children:"upload"}),Object(b.jsx)("input",{type:"file",defaultValue:this.state.image,onChange:this.changeImage,className:"form-control"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{className:"btn btn-success",type:"submit",children:"Post"})})]})]})}}]),a}(s.Component),Y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)("h1",{className:"",children:"404"}),Object(b.jsx)("h5",{className:"",children:"Oops! This Page Could Not Be Found"}),Object(b.jsx)("p",{children:"Sorry the page you are looking for does not exist or have been removed, name changed or is temporary unavailable."}),Object(b.jsx)(h.b,{to:"/",children:Object(b.jsx)("h5",{className:"",children:"Back To Home"})})]})}}]),a}(s.Component),V=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)("h1",{className:"",children:"500 Server Error"}),Object(b.jsx)("h5",{className:"",children:"Oops! Something Went Wrong"}),Object(b.jsx)("p",{children:"Try to refresh this page or feel free to contact us if the problem persists."}),Object(b.jsx)(h.b,{to:"/",children:Object(b.jsx)("h5",{className:"",children:"Back To Home"})})]})}}]),a}(s.Component),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container my-5",children:[Object(b.jsx)("h1",{className:"",children:"404"}),Object(b.jsx)("h5",{className:"",children:"Oops! The Requested URL Could Not Be Found"}),Object(b.jsx)("p",{children:"Sorry the url you are trying to access does not exist or have been removed, name changed or is temporary unavailable."}),Object(b.jsx)(h.b,{to:"/",children:Object(b.jsx)("h5",{className:"",children:"Back To Home"})})]})}}]),a}(s.Component),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={name:"",email:"",password:"",password2:""},e.changeName=e.changeName.bind(Object(y.a)(e)),e.changeEmail=e.changeEmail.bind(Object(y.a)(e)),e.changePassword=e.changePassword.bind(Object(y.a)(e)),e.changePassword2=e.changePassword2.bind(Object(y.a)(e)),e.inputRef=n.a.createRef(),e}return Object(i.a)(a,[{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"changePassword2",value:function(e){this.setState({password2:e.target.value})}},{key:"componentDidMount",value:function(){this.inputRef.current.focus(),g.b.success("Account successfully verified")}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container mt-4 ",children:[Object(b.jsx)("h5",{className:"text-center",children:"Register Account"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",value:this.state.name,onChange:this.changeName,placeholder:"enter name",ref:this.inputRef})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",value:this.state.email,onChange:this.changeEmail,placeholder:"enter mail"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.changePassword,placeholder:"xxxxxxx"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password2,onChange:this.changePassword2,placeholder:"xxxxxxx"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Register"})})]})})]})}}]),a}(s.Component),J=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={username:"",email:"",password:"",password2:"",users:[]},e.changeUsername=e.changeUsername.bind(Object(y.a)(e)),e.changeEmail=e.changeEmail.bind(Object(y.a)(e)),e.changePassword=e.changePassword.bind(Object(y.a)(e)),e.changePassword2=e.changePassword2.bind(Object(y.a)(e)),e.onSubmit=e.onSubmit.bind(Object(y.a)(e)),e.inputRef=n.a.createRef(),e}return Object(i.a)(a,[{key:"changeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"changePassword2",value:function(e){this.setState({password2:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.users.map((function(e){return e.email})),s=this.state,n=s.password,c=s.password2,r=s.email;if(n!==c){return console.log("password not coreect"),g.b.error("password not coreect"),this.setState({password:"",password2:""}),!1}if(!n||!c){return console.log("Enter password"),g.b.error("Enter password"),this.setState({password:"",password2:""}),!1}if(n.length<4){return console.log("Password must be atleast 4 characters"),g.b.error("Password must be atleast 4 characters"),this.setState({password:"",password2:""}),!1}if(a.includes(r)){console.log(a);return console.log("email exist"),g.b.error("Email exist"),this.setState({password:"",password2:"",email:""}),!1}var o={password:this.state.password,password2:this.state.password2,email:this.state.email,username:this.state.username};console.log(o),j.a.post("http://localhost:4000/register",o).then((function(e){console.log(e.data);console.log("success"),g.b.success("Registered successfully"),t.setState({password:"",password2:"",email:"",username:""})})).catch((function(e){console.log(e.response)}))}},{key:"componentDidMount",value:function(){var e=this;this.inputRef.current.focus(),g.b.success("Account successfully verified"),j.a.get("http://localhost:4000/users").then((function(t){e.setState({users:t.data})}))}},{key:"render",value:function(){var e=Array.from(this.state.users);return Object(b.jsxs)("div",{className:"container mt-4 ",children:[e.map((function(e){return Object(b.jsx)("h5",{children:e.email},e._id)})),Object(b.jsx)("h5",{className:"text-center",children:"Register Account"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{type:"text",className:"form-control",value:this.state.username,onChange:this.changeUsername,placeholder:"enter name",ref:this.inputRef})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",value:this.state.email,onChange:this.changeEmail,placeholder:"enter mail"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.changePassword,placeholder:"xxxxxxx"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password2,onChange:this.changePassword2,placeholder:"xxxxxxx"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Register"})})]})})]})}}]),a}(s.Component),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={username:"",email:"",password:"",users:[],logger:!1,logMessage:!1},e.changeEmail=e.changeEmail.bind(Object(y.a)(e)),e.changePassword=e.changePassword.bind(Object(y.a)(e)),e.inputRef=n.a.createRef(),e.onSubmit=e.onSubmit.bind(Object(y.a)(e)),e}return Object(i.a)(a,[{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;this.inputRef.current.focus(),j.a.get("http://localhost:4000/users").then((function(t){e.setState({users:t.data})})).catch((function(e){console.log(e.response)}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,s=a.users,n=a.email,c=s.map((function(e){return e.email}));if(!c.includes(n)){console.log(c);return console.log("No user with this email found"),g.b.error("No user with this email found"),this.setState({email:"",password:""}),!1}console.log(c);var r={email:this.state.email,password:this.state.password};j.a.post("http://localhost:4000/login",r).then((function(e){if(console.log(e.data),"Incorrect password"===e.data)g.b.error("Incorrect password"),t.setState({email:t.state.email,password:""});else{g.b.success("loggedin");var a=t.state,s=a.logger,n=a.logMessage;t.setState({logger:!0,currentUser:localStorage.setItem("currentUser",JSON.stringify(e.data)),log:localStorage.setItem("logger",s),logMessage:!0,logMess:sessionStorage.setItem("logMessage",n)}),window.setTimeout((function(){window.location.href="/"}),1500)}})).catch((function(e){return console.log(e.response)}))}},{key:"render",value:function(){var e=Array.from(this.state.users),t=localStorage.getItem("logger"),a=localStorage.getItem("currentUser"),s=JSON.parse(a);return Object(b.jsxs)("div",{className:"container mt-5",children:[Object(b.jsx)("h5",{className:"text-center",children:"Login Account"}),e.map((function(e,t){return Object(b.jsx)("h5",{children:e.email},t)})),Object(b.jsx)("h5",{children:this.state.logger?"yes boss":"no"}),Object(b.jsx)("h5",{className:"text-success",children:t?"you are currently loggedin":"you are loggedout"}),Object(b.jsx)("h5",{children:s?s.email:""}),Object(b.jsx)("h5",{children:s?s.username:""}),Object(b.jsx)(h.b,{to:"#",onClick:this.logOut,children:"logOut"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",value:this.state.email,onChange:this.changeEmail,placeholder:"enter mail",ref:this.inputRef})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.changePassword,placeholder:"xxxxxxx"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Login"})})]})})]})}}]),a}(s.Component),K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={email:"",users:{},forgotMes:!1},e.changeEmail=e.changeEmail.bind(Object(y.a)(e)),e.onSubmit=e.onSubmit.bind(Object(y.a)(e)),e}return Object(i.a)(a,[{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;j.a.get("http://localhost:4000/users").then((function(t){e.setState({users:t.data})}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,s=a.users,n=a.email,c=s.map((function(e){return e.email}));if(!c.includes(n))return g.b.error("No user with this email found"),this.setState({email:""}),!1;console.log(c);var r={email:this.state.email};this.setState({forgotMes:!0}),j.a.post("http://localhost:4000/forgot",r).then((function(e){g.b.success("sent forgot"),console.log(e.data),t.setState({email:"",forgotMes:!1})})).catch((function(e){console.log(e.response),g.b.error("message not sent"),t.setState({forgotMes:!1})}))}},{key:"render",value:function(){var e=Array.from(this.state.users);return Object(b.jsxs)("div",{className:"container mt-5",children:[e.map((function(e,t){return Object(b.jsx)("h5",{children:e.email},t)})),Object(b.jsx)("h5",{className:"text-center",children:"Send Reset Link"}),Object(b.jsxs)("h5",{className:"text-danger",children:[" ",this.state.forgotMes?"Email sending...":" "]}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",value:this.state.email,onChange:this.changeEmail,placeholder:"enter mail"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Send Reset Link"})})]})})]})}}]),a}(s.Component),G=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={password:"",password2:"",isValid:!1},e.changePassword=e.changePassword.bind(Object(y.a)(e)),e.changePassword2=e.changePassword2.bind(Object(y.a)(e)),e.onSubmit=e.onSubmit.bind(Object(y.a)(e)),e}return Object(i.a)(a,[{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"changePassword2",value:function(e){this.setState({password2:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;j.a.get("http://localhost:4000/reset/".concat(this.props.match.params.token)).then((function(t){"Password reset token is invalid or has expired"===t.data?(e.setState({isValid:!1}),g.b.error("Password reset token is invalid or has expired")):(e.setState({isValid:!0}),g.b.success("You can now reset your email")),console.log(t.data)})).catch((function(e){console.log(e.response),g.b.error("An error occured")}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,s=a.password,n=a.password2;if(!s||!n)return g.b.error("You cannot submit empty input"),!1;if(s.length<4)return g.b.error("Password must be atleast 4 characters"),this.setState({password:"",password2:""}),!1;if(s!==n)g.b.error("password do not match"),this.setState({password:"",password2:""});else{var c={password:this.state.password,password2:this.state.password2};console.log(c),g.b.success("working"),j.a.post("http://localhost:4000/reset/".concat(this.props.match.params.token),c).then((function(e){t.setState({password:"",password2:""})})).catch((function(e){console.log(e.response),g.b.error("An error occurred")}))}}},{key:"render",value:function(){return this.state.isValid?Object(b.jsxs)("div",{className:"container mt-5",children:[Object(b.jsx)("h5",{className:"text-center",children:"Reset Account"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.changePassword,placeholder:"xxxxxxx"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",value:this.state.password2,onChange:this.changePassword2,placeholder:"xxxxxxx"})]}),Object(b.jsx)("div",{className:"form-group mt-3",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Reset"})})]})})]}):Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(K,{})})}}]),a}(s.Component),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={isLoading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({isLoading:!1})}),9e3)}},{key:"render",value:function(){return this.state.isLoading?Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsx)("h5",{className:"text-danger text-center",children:"Verifying your account please wait...."})}):Object(b.jsx)(J,{})}}]),a}(s.Component),X=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){g.b.error("Unauthorized login to access this page")}},{key:"render",value:function(){return Object(b.jsx)(W,{})}}]),a}(s.Component),Z=(a(103),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handlePageClick=function(e){var t=e.selected,a=t*s.state.perPage;s.setState({currentPage:t,offset:a},(function(){s.receivedData()})),window.scrollTo(0,0)},s.state={offset:0,data:[],perPage:12,currentPage:0},s.handlePageClick=s.handlePageClick.bind(Object(y.a)(s)),s}return Object(i.a)(a,[{key:"receivedData",value:function(){var e=this;j.a.get("http://localhost:4000/posts").then((function(t){var a=t.data,s=a.slice(e.state.offset,e.state.offset+e.state.perPage).map((function(e){return Object(b.jsxs)(n.a.Fragment,{children:[Object(b.jsx)("p",{className:"text-center",children:e.title}),Object(b.jsx)("img",{src:e.image,alt:""})]},e._id)}));e.setState({pageCount:Math.ceil(a.length/e.state.perPage),postData:s})}))}},{key:"componentDidMount",value:function(){this.receivedData()}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container",children:[this.state.postData,Object(b.jsx)(U.a,{previousLabel:"prev",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:0,onPageChange:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"})]})}}]),a}(s.Component)),$=(a(104),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={myPosts:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.a.get("http://localhost:4000/posts").then((function(t){e.setState({myPosts:t.data})})).catch((function(e){console.log(e.response)}))}},{key:"render",value:function(){var e=this.state.myPosts,t=Array.from(e),a=localStorage.getItem("logger"),s=localStorage.getItem("currentUser"),n=JSON.parse(s);return Object(b.jsxs)("div",{children:[Object(b.jsxs)(h.a,{forceRefresh:!0,children:[Object(b.jsx)(v,{}),Object(b.jsx)(O.Provider,{value:{logger:a,currentUser:n,allPosts:t},children:Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{path:"/",exact:!0,component:f}),Object(b.jsx)(d.b,{path:"/about",children:a?Object(b.jsx)(N,{}):Object(b.jsx)(d.a,{to:"/unauthorized"})}),Object(b.jsx)(d.b,{path:"/contact",component:w}),Object(b.jsx)(d.b,{path:"/new",component:_}),Object(b.jsx)(d.b,{path:"/post/:id",component:q}),Object(b.jsx)(d.b,{path:"/edit/post/:id",component:B}),Object(b.jsx)(d.b,{path:"/user/register",component:J}),Object(b.jsx)(d.b,{path:"/user/login",component:W}),Object(b.jsx)(d.b,{path:"/user/forgot-password",component:K}),Object(b.jsx)(d.b,{path:"/user/reset-password/:token",component:G}),Object(b.jsx)(d.b,{path:"/user/edit",component:H}),Object(b.jsx)(d.b,{path:"/user/welcome",component:Q}),Object(b.jsx)(d.b,{path:"/paginated",component:Z}),Object(b.jsx)(d.b,{path:"/error/500",component:V}),Object(b.jsx)(d.b,{path:"/error/404",component:z}),Object(b.jsx)(d.b,{path:"/unauthorized",component:X}),Object(b.jsx)(d.b,{path:"*",component:Y})]})})]}),Object(b.jsx)(g.a,{position:"top-center",className:"text-center",autoClose:9e3})]})}}]),a}(s.Component));r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)($,{})}),document.getElementById("root"))},39:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.dbbec46d.chunk.js.map